<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Ami</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <link rel="stylesheet" href="/static/style.css" />
</head>
<body>

<div class="container">
  <header>
    <div class="header-row">
      <h1 id="agent-title">Ami</h1>

        <select id="agent-selector" onchange="switchAgent(this.value)">
          <option value="ami">Ami</option>
          <option value="workbench">Workbench</option>
          <option value="caretaker">Caretaker</option>
        </select>
    </div>

    <p id="agent-subtitle" class="subtitle">
      A gentle place to notice today
    </p>

  </header>

  <main>
    <!-- LEFT COLUMN -->
    <div class="main-column">
      <!-- Chat -->
      <section class="chat">
        <div id="chat-log" class="chat-log">
          <div class="ami-msg">
            <span class="ami-avatar"></span>
            <span class="ami-text">
              Hi. I’m here if you’d like to note something you noticed today.
            </span>
          </div>
        </div>

        <!-- Save confirmation (hidden by default) -->
        <div id="save-actions" class="save-actions" style="display: none;">
          <button onclick="confirmSave()">Save</button>
          <button class="secondary" onclick="dismissSave()">Not now</button>
        </div>

        <div class="chat-input">
          <input
            id="chat-text"
            type="text"
            placeholder="Type something you noticed…"
            aria-label="Message Ami"
            onkeydown="if (event.key === 'Enter') sendMessage();"
          />
          <button onclick="sendMessage()">Send</button>
        </div>
      </section>

      <section class="daily-summary">
        <h3>Today</h3>
        <div id="daily-events" class="daily-events">
          <p class="muted">No entries yet.</p>
        </div>
      </section>
    </div>

    <!-- RIGHT COLUMN -->
    <div class="side-panel">
      <!-- Timeline -->
      <aside class="timeline">
        <h3>Timeline</h3>
        <!-- Sync controls -->
        <div class="sync-bar">
          <button id="sync-btn" onclick="syncNow()">Sync now</button>
          <span id="sync-status" class="sync-status">
            Not synced yet
          </span>
        </div>

        <div id="timeline"></div>
      </aside>

      <!-- Reflections -->
      <aside class="reflections">
        <h3>Reflections</h3>

        <div class="reflection-controls">
          <button onclick="loadReflections()">Refresh</button>
          <button class="secondary" onclick="generateWeeklyReflection()">
            Generate weekly reflection
          </button>
        </div>

        <div id="reflections-list" class="reflections-list">
          <p class="muted">No reflections yet.</p>
        </div>
      </aside>
    </div>


  </main>
</div>

<script src="/static/app.js"></script>
<script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
</body>
</html>
